---
# clone our other repositories into this repo
- name: Get Smart Gateway Operator
  block:
    - name: Try cloning same-named branch or override branch
      git:
        repo: https://github.com/infrawatch/smart-gateway-operator
        dest: working/smart-gateway-operator
        version: "{{ sgo_branch | default(branch, true) }}"
        force: yes
  rescue:
    - name: Get master branch because same-named doesn't exist
      git:
        repo: https://github.com/infrawatch/smart-gateway-operator
        dest: working/smart-gateway-operator
        version: master
        force: yes

- name: Get Smart Gateway
  block:
    - name: Try cloning same-named branch or override branch
      git:
        repo: https://github.com/infrawatch/smart-gateway
        dest: working/smart-gateway
        version: "{{ sg_branch | default(branch, true) }}"
        force: yes
  rescue:
    - name: Get master branch because same-named doesn't exist
      git:
        repo: https://github.com/infrawatch/smart-gateway
        dest: working/smart-gateway
        version: master
        force: yes

