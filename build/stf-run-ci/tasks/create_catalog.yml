---
- name: Create CloudOps CatalogSource
  kubernetes.core.k8s:
    definition:
      apiVersion: operators.coreos.com/v1alpha1
      kind: CatalogSource
      metadata:
        name: "{{ infrawatch_operators }}"
        namespace: "{{ namespace }}"
      spec:
        displayName: Infrawatch Operators
        image: "{{ stf_index_image_path }}"
        publisher: CloudOps
        sourceType: grpc
        grpcPodConfig:
          securityContextConfig: legacy
        updateStrategy:
          registryPoll:
            interval: 5m
